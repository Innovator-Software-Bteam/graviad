"use strict";(self.webpackChunkclient_ver_2=self.webpackChunkclient_ver_2||[]).push([[588],{9588:(e,l,t)=>{t.r(l),t.d(l,{MenuTemplatePage:()=>I});var i=t(3961),a=t(5043),r=t(9359);const s=(0,a.createContext)(void 0);function n(){return(0,a.useContext)(s)}var d=t(2200),o=t(3156),c=t(5394),u=t(7154),v=t(4558),m=t(423),h=t(1129),p=t(3404),f=t(579);function x(e){const l=(0,i.Jd)(),t=(null===l||void 0===l||l.merchant,n());return(0,a.useEffect)((()=>{}),[l]),(0,f.jsxs)("div",{className:(0,r.Id)("template-card","flex flex-col gap-8 justify-center items-center","p-4 w-full min-w-[300px] aspect-[1/1]"),children:[(0,f.jsx)(g,{children:e.children}),(0,f.jsx)(j,{}),(0,f.jsx)(y,{})]},null===t||void 0===t?void 0:t.id)}function g(e){return(0,f.jsx)("div",{className:"w-full",children:e.children})}function y(e){var l;const t=n(),s=(0,i.Jd)(),x=null===s||void 0===s?void 0:s.merchant,{open:g}=(0,p.sp)(),[y,j]=(0,a.useState)([]),[w,C]=(0,a.useState)(void 0),I=[{icon:(0,f.jsx)(o.sOK,{size:20}),label:(null===t||void 0===t||null===(l=t.numberOfLikes)||void 0===l?void 0:l.toString())||"0"}];return(0,a.useEffect)((()=>{null!==x&&void 0!==x&&x.templateIds&&j(x.templateIds),null!==x&&void 0!==x&&x.usingTemplateProfileCardId&&C(x.usingTemplateProfileCardId)}),[s]),(0,a.useEffect)((()=>{}),[w]),(0,f.jsxs)("div",{className:(0,r.Id)("w-full","flex flex-row justify-between items-center gap-4"),children:[(0,f.jsx)("div",{className:(0,r.Id)("flex flex-row gap-4 justify-start items-center","w-full"),children:I.map(((e,l)=>(0,f.jsxs)(d.Typography,{variant:"small",className:(0,r.Id)("flex flex-row gap-2 items-center","text-grvd-theme-sys-dark-on-primary-variant font-medium","px-2 py-1"),children:[e.icon,e.label]},l)))}),w===(null===t||void 0===t?void 0:t.id)?(0,f.jsx)(h.$,{colorcustom:"secondary",sizecustom:"lg",children:"Using"}):(0,f.jsx)(h.$,{colorcustom:"primary",sizecustom:"lg",onClick:async()=>{null!==x&&void 0!==x&&x.id&&u.A.patch("".concat(v.A.server.url,"/merchants/").concat(null===x||void 0===x?void 0:x.id),{usingTemplateProfileCardId:null===t||void 0===t?void 0:t.id},{withCredentials:!0}).then((e=>{const l=e.data;C(l.usingTemplateProfileCardId)})).catch((e=>{g(null,"error"),console.error(e)}))},children:"Use"}),y.includes(null===t||void 0===t?void 0:t.id)?(0,f.jsx)("button",{className:(0,r.Id)("text-grvd-theme-sys-dark-primary","hover:scale-105 transition-transform duration-300 ease-in-out","bg-white/10","rounded-full"),onClick:async()=>{u.A.post("".concat(v.A.server.url,"/merchants/").concat(null===x||void 0===x?void 0:x.id,"/remove-template/").concat(null===t||void 0===t?void 0:t.id),{},{withCredentials:!0}).then((e=>{j(y.filter((e=>e!==(null===t||void 0===t?void 0:t.id))))})).catch()},children:(0,f.jsx)(m.Knk,{size:48})}):(0,f.jsxs)("button",{className:(0,r.Id)("text-grvd-theme-sys-dark-primary","hover:scale-105 transition-transform duration-300 ease-in-out","bg-white/10","rounded-full","relative"),onClick:async()=>{u.A.post("".concat(v.A.server.url,"/merchants/").concat(null===x||void 0===x?void 0:x.id,"/add-template/").concat(null===t||void 0===t?void 0:t.id),{},{withCredentials:!0}).then((e=>{j([...y,null===t||void 0===t?void 0:t.id])})).catch()},children:[(0,f.jsx)("div",{className:(0,r.Id)("hover:animate-ping","hover:bg-white/10","w-full h-full ","absolute rounded-full -z-0")}),(0,f.jsx)(c.YHj,{size:48})]})]})}function j(e){var l;const t=n();return(0,f.jsxs)("div",{className:(0,r.Id)("flex flex-col gap-4","w-full"),children:[(0,f.jsx)("div",{className:"flex flex-row flex-wrap items-center justify-start gap-2",children:null===t||void 0===t||null===(l=t.tagLabels)||void 0===l?void 0:l.map((e=>(0,f.jsx)(d.Typography,{variant:"small",className:(0,r.Id)("px-2 py-1 rounded-md","text-grvd-theme-sys-dark-primary","bg-white/10"),children:e},e)))}),(0,f.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,f.jsx)(d.Typography,{variant:"h6",className:"text-grvd-theme-sys-dark-primary",children:null===t||void 0===t?void 0:t.name}),(0,f.jsx)(d.Typography,{variant:"paragraph",className:"text-grvd-theme-sys-dark-on-primary-variant",children:null===t||void 0===t?void 0:t.brief})]})]})}var w=t(4280),C=t(5568);function I(e){const l=(0,i.Jd)(),[t,n]=(0,a.useState)([]),{handleFilter:d}=(0,C.A)();return(0,a.useEffect)((()=>{(async()=>{await u.A.get("".concat(v.A.server.url,"/templates"),{withCredentials:!0}).then((e=>{n(e.data)})).catch((e=>{console.log(e)}))})().then().catch(),console.log(t)}),[]),(0,f.jsx)(i.Wg.Provider,{value:null===l||void 0===l?void 0:l.merchant,children:(0,f.jsx)("div",{className:(0,r.Id)("grid grid-cols-[repeat(auto-fit,minmax(300px,1fr))] auto-rows-auto","gap-16","w-full"),children:t.filter((e=>!d||d(e))).map(((e,l)=>(0,f.jsx)(s.Provider,{value:e,children:(0,f.jsx)(x,{children:(0,f.jsx)(w.a2,{typeCustom:e.templateType})})},l)))})})}}}]);
//# sourceMappingURL=588.ef25c30b.chunk.js.map